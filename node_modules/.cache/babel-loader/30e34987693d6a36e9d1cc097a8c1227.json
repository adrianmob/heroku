{"ast":null,"code":"var _jsxFileName = \"/Users/adrian/Desktop/heroku/src/components/user/Registro/Registro.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { TextField, Button, FormControlLabel, Checkbox } from \"@material-ui/core\";\nimport { Link } from \"react-router-dom\";\nimport validator from \"validator\";\nimport { KeyboardDatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\nimport MomentUtils from \"@date-io/moment\";\nimport \"moment/locale/es\";\nimport { useStyles } from \"../../../hooks/useStyle\";\nimport { useForm } from \"../../../hooks/useForm\";\nimport { Alerta } from \"../Alerta\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useDispatch } from \"react-redux\";\nimport { registrar } from \"../../../actions/registro\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Registro = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const classes = useStyles();\n  const [{\n    open,\n    message,\n    emoji,\n    success\n  }, setOpen] = useState({\n    open: false,\n    message: \"\",\n    emoji: \"\",\n    success: false\n  });\n  const [response, setResponse] = useState({\n    host: \"\",\n    email: \"\",\n    phone: \"\",\n    numeroCliente: \"\",\n    birthday: \"\"\n  });\n  const [errors, setErrors] = useState({});\n  const [date, setDate] = useState(Date.now());\n\n  const handleDateChange = date => {\n    setDate(date);\n  };\n\n  const [{\n    numeroCliente,\n    email,\n    telefono,\n    avisoPrivacidad,\n    terminosCond\n  }, handleChange] = useForm({\n    numeroCliente: \"\",\n    email: \"\",\n    telefono: \"\",\n    avisoPrivacidad: false,\n    terminosCond: false\n  });\n\n  const handleClose = () => {\n    setOpen({\n      open: false,\n      message: \"\",\n      emoji: \"\"\n    });\n\n    if (success) {\n      console.log(response);\n      dispatch(registrar(response));\n      history.push(\"/auth/user/validacion\");\n    }\n  };\n\n  const handleSubmit = async e => {\n    // console.log(date.format(\"YYYY-MM-DD\"));\n    e.preventDefault();\n    const errors = validForm();\n\n    if (Object.keys(errors).length === 0) {\n      if (!avisoPrivacidad) {\n        updAlerta(\"Debes aceptar los avisos de privacidad para poder continuar.\", \"⚠️\");\n        return;\n      }\n\n      if (!terminosCond) {\n        updAlerta(\"Debes aceptar los términos y condiciones para continuar.\", \"⚠️\");\n        return;\n      }\n\n      try {\n        const {\n          data\n        } = await axios.post(\"https://kikoya-portal.herokuapp.com/api/v1/enrollment/registry/\", {\n          host: \"sandbox001369cd406f49aa875bd8f230a0de80.mailgun.org\",\n          client_number: numeroCliente,\n          email: email,\n          phone: telefono,\n          birthday: date.format(\"YYYY-MM-DD\")\n        });\n        const {\n          user\n        } = data;\n        setResponse({\n          host: user.host,\n          email: user.email,\n          phone: user.phone,\n          birthday: date.format(\"YYYY-MM-DD\"),\n          numeroCliente\n        });\n        updAlerta(\"Se ha enviado un NIP a tu correo electrónico y celular.\", \"🔢\", true);\n      } catch (error) {\n        console.log(error.response);\n        updAlerta(\"Algo salio mal en el servidor\", \"⚠️\");\n      }\n    }\n  };\n\n  const updAlerta = (message, emoji, success = false) => {\n    setOpen({\n      open: true,\n      message,\n      emoji,\n      success\n    });\n  };\n\n  const validForm = () => {\n    setErrors({});\n    let errors = {};\n\n    if (!validator.isEmail(email)) {\n      errors.email = \"Ingrese un email valido\";\n    }\n\n    if (validator.isEmpty(numeroCliente)) {\n      errors.numeroCliente = \"Campo obligatorio\";\n    }\n\n    if (validator.isEmpty(telefono)) {\n      errors.telefono = \"Campo obligatorio\";\n    }\n\n    if (validator.isEmpty(email)) {\n      errors.email = \"Campo obligatorio\";\n    }\n\n    setErrors(errors);\n    return errors;\n  };\n\n  const handleInputPress = e => {\n    let error = \"\";\n\n    switch (e.target.name) {\n      case \"email\":\n        if (!validator.isEmail(e.target.value)) {\n          error = \"Ingrese un email valido\";\n        }\n\n        break;\n\n      default:\n        break;\n    }\n\n    if (validator.isEmpty(e.target.value)) {\n      error = \"Campo obligatorio\";\n    }\n\n    setErrors({ ...errors,\n      [e.target.name]: error\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"registro__container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"registro__form\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"titulo\",\n          children: \"Registrate para ser parte de KIKOYA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"informacion_parrafo\",\n          children: \"Ten a la mano la informaci\\xF3n de tu cuenta para poder acceder.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"registro__containerInput\",\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            className: \"registro__input\",\n            label: \"N\\xFAmero de cliente\",\n            name: \"numeroCliente\",\n            value: numeroCliente,\n            onChange: handleChange,\n            onKeyUp: handleInputPress,\n            type: \"password\",\n            error: errors.numeroCliente ? true : false,\n            helperText: errors.numeroCliente && errors.numeroCliente\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"registro__containerInput\",\n          children: /*#__PURE__*/_jsxDEV(MuiPickersUtilsProvider, {\n            utils: MomentUtils,\n            locale: \"es\",\n            children: /*#__PURE__*/_jsxDEV(KeyboardDatePicker, {\n              className: \"registro__input\",\n              format: \"DD/MM/yyyy\",\n              label: \"Fecha de nacimiento\",\n              value: date,\n              placeholder: \"dd/mm/aaaa\",\n              onChange: handleDateChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"registro__containerInput\",\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            className: \"registro__input\",\n            label: \"Tel\\xE9fono\",\n            type: \"number\",\n            name: \"telefono\",\n            value: telefono,\n            onChange: handleChange,\n            error: errors.telefono ? true : false,\n            helperText: errors.telefono && errors.telefono,\n            onKeyUp: handleInputPress\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"registro__containerInput\",\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            className: \"registro__input\",\n            label: \"Correo electr\\xF3nico\",\n            name: \"email\",\n            type: \"email\",\n            value: email,\n            error: errors.email ? true : false,\n            helperText: errors.email && errors.email,\n            onChange: handleChange,\n            onKeyUp: handleInputPress\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"containerRecoveryLogin\",\n          children: [/*#__PURE__*/_jsxDEV(FormControlLabel, {\n            value: \"end\",\n            control: /*#__PURE__*/_jsxDEV(Checkbox, {\n              value: avisoPrivacidad,\n              name: \"avisoPrivacidad\",\n              onChange: handleChange,\n              color: \"primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 17\n            }, this),\n            label: /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: \"14px\"\n              },\n              children: \"Estoy de acuerdo con el Aviso de privacidad\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 17\n            }, this),\n            labelPlacement: \"end\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormControlLabel, {\n            value: \"end\",\n            control: /*#__PURE__*/_jsxDEV(Checkbox, {\n              value: terminosCond,\n              name: \"terminosCond\",\n              onChange: handleChange,\n              color: \"primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 17\n            }, this),\n            label: /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: \"14px\"\n              },\n              children: \"Acepto los T\\xE9rminos y condiciones\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 17\n            }, this),\n            labelPlacement: \"end\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          className: classes.primary,\n          style: {\n            width: \"100%\",\n            display: \"block\",\n            padding: \"15px 0\",\n            margin: \"15px 0\",\n            maxWidth: \"400px\"\n          },\n          type: \"submit\",\n          children: \"REG\\xCDSTRATE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          style: {\n            display: \"block\",\n            margin: \"8px 0\"\n          },\n          className: \"forgotPass\",\n          to: \"/auth/user/login\",\n          children: \"\\xBFYa tienes una cuenta? Inicia sesi\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"capaLogo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Alerta, {\n      open: open,\n      message: message,\n      emoji: emoji,\n      handleClose: handleClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 180,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Registro, \"MrsEHBZOuEAikpmxFwSaGYKzODM=\", false, function () {\n  return [useDispatch, useHistory, useStyles, useForm];\n});\n\n_c = Registro;\n\nvar _c;\n\n$RefreshReg$(_c, \"Registro\");","map":{"version":3,"sources":["/Users/adrian/Desktop/heroku/src/components/user/Registro/Registro.js"],"names":["React","useState","TextField","Button","FormControlLabel","Checkbox","Link","validator","KeyboardDatePicker","MuiPickersUtilsProvider","MomentUtils","useStyles","useForm","Alerta","useHistory","axios","useDispatch","registrar","Registro","dispatch","history","classes","open","message","emoji","success","setOpen","response","setResponse","host","email","phone","numeroCliente","birthday","errors","setErrors","date","setDate","Date","now","handleDateChange","telefono","avisoPrivacidad","terminosCond","handleChange","handleClose","console","log","push","handleSubmit","e","preventDefault","validForm","Object","keys","length","updAlerta","data","post","client_number","format","user","error","isEmail","isEmpty","handleInputPress","target","name","value","fontSize","primary","width","display","padding","margin","maxWidth"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SACEC,SADF,EAEEC,MAFF,EAGEC,gBAHF,EAIEC,QAJF,QAKO,mBALP;AAMA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,SACEC,kBADF,EAEEC,uBAFF,QAGO,sBAHP;AAIA,OAAOC,WAAP,MAAwB,iBAAxB;AACA,OAAO,kBAAP;AACA,SAASC,SAAT,QAA0B,yBAA1B;AACA,SAASC,OAAT,QAAwB,wBAAxB;AACA,SAASC,MAAT,QAAuB,WAAvB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,SAAT,QAA0B,2BAA1B;;AAEA,OAAO,MAAMC,QAAQ,GAAG,MAAM;AAAA;;AAC5B,QAAMC,QAAQ,GAAGH,WAAW,EAA5B;AACA,QAAMI,OAAO,GAAGN,UAAU,EAA1B;AACA,QAAMO,OAAO,GAAGV,SAAS,EAAzB;AACA,QAAM,CAAC;AAAEW,IAAAA,IAAF;AAAQC,IAAAA,OAAR;AAAiBC,IAAAA,KAAjB;AAAwBC,IAAAA;AAAxB,GAAD,EAAoCC,OAApC,IAA+CzB,QAAQ,CAAC;AAC5DqB,IAAAA,IAAI,EAAE,KADsD;AAE5DC,IAAAA,OAAO,EAAE,EAFmD;AAG5DC,IAAAA,KAAK,EAAE,EAHqD;AAI5DC,IAAAA,OAAO,EAAE;AAJmD,GAAD,CAA7D;AAMA,QAAM,CAACE,QAAD,EAAWC,WAAX,IAA0B3B,QAAQ,CAAC;AACvC4B,IAAAA,IAAI,EAAE,EADiC;AAEvCC,IAAAA,KAAK,EAAE,EAFgC;AAGvCC,IAAAA,KAAK,EAAE,EAHgC;AAIvCC,IAAAA,aAAa,EAAE,EAJwB;AAKvCC,IAAAA,QAAQ,EAAE;AAL6B,GAAD,CAAxC;AAOA,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBlC,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACmC,IAAD,EAAOC,OAAP,IAAkBpC,QAAQ,CAACqC,IAAI,CAACC,GAAL,EAAD,CAAhC;;AAEA,QAAMC,gBAAgB,GAAIJ,IAAD,IAAU;AACjCC,IAAAA,OAAO,CAACD,IAAD,CAAP;AACD,GAFD;;AAGA,QAAM,CACJ;AAAEJ,IAAAA,aAAF;AAAiBF,IAAAA,KAAjB;AAAwBW,IAAAA,QAAxB;AAAkCC,IAAAA,eAAlC;AAAmDC,IAAAA;AAAnD,GADI,EAEJC,YAFI,IAGFhC,OAAO,CAAC;AACVoB,IAAAA,aAAa,EAAE,EADL;AAEVF,IAAAA,KAAK,EAAE,EAFG;AAGVW,IAAAA,QAAQ,EAAE,EAHA;AAIVC,IAAAA,eAAe,EAAE,KAJP;AAKVC,IAAAA,YAAY,EAAE;AALJ,GAAD,CAHX;;AAWA,QAAME,WAAW,GAAG,MAAM;AACxBnB,IAAAA,OAAO,CAAC;AACNJ,MAAAA,IAAI,EAAE,KADA;AAENC,MAAAA,OAAO,EAAE,EAFH;AAGNC,MAAAA,KAAK,EAAE;AAHD,KAAD,CAAP;;AAKA,QAAIC,OAAJ,EAAa;AACXqB,MAAAA,OAAO,CAACC,GAAR,CAAYpB,QAAZ;AAEAR,MAAAA,QAAQ,CAACF,SAAS,CAACU,QAAD,CAAV,CAAR;AACAP,MAAAA,OAAO,CAAC4B,IAAR,CAAa,uBAAb;AACD;AACF,GAZD;;AAcA,QAAMC,YAAY,GAAG,MAAOC,CAAP,IAAa;AAChC;AACAA,IAAAA,CAAC,CAACC,cAAF;AACA,UAAMjB,MAAM,GAAGkB,SAAS,EAAxB;;AACA,QAAIC,MAAM,CAACC,IAAP,CAAYpB,MAAZ,EAAoBqB,MAApB,KAA+B,CAAnC,EAAsC;AACpC,UAAI,CAACb,eAAL,EAAsB;AACpBc,QAAAA,SAAS,CACP,8DADO,EAEP,IAFO,CAAT;AAIA;AACD;;AAED,UAAI,CAACb,YAAL,EAAmB;AACjBa,QAAAA,SAAS,CACP,0DADO,EAEP,IAFO,CAAT;AAIA;AACD;;AAED,UAAI;AACF,cAAM;AAAEC,UAAAA;AAAF,YAAW,MAAM1C,KAAK,CAAC2C,IAAN,CACrB,iEADqB,EAErB;AACE7B,UAAAA,IAAI,EAAE,qDADR;AAEE8B,UAAAA,aAAa,EAAE3B,aAFjB;AAGEF,UAAAA,KAAK,EAAEA,KAHT;AAIEC,UAAAA,KAAK,EAAEU,QAJT;AAKER,UAAAA,QAAQ,EAAEG,IAAI,CAACwB,MAAL,CAAY,YAAZ;AALZ,SAFqB,CAAvB;AAWA,cAAM;AAAEC,UAAAA;AAAF,YAAWJ,IAAjB;AAEA7B,QAAAA,WAAW,CAAC;AACVC,UAAAA,IAAI,EAAEgC,IAAI,CAAChC,IADD;AAEVC,UAAAA,KAAK,EAAE+B,IAAI,CAAC/B,KAFF;AAGVC,UAAAA,KAAK,EAAE8B,IAAI,CAAC9B,KAHF;AAIVE,UAAAA,QAAQ,EAAEG,IAAI,CAACwB,MAAL,CAAY,YAAZ,CAJA;AAKV5B,UAAAA;AALU,SAAD,CAAX;AAQAwB,QAAAA,SAAS,CACP,yDADO,EAEP,IAFO,EAGP,IAHO,CAAT;AAKD,OA3BD,CA2BE,OAAOM,KAAP,EAAc;AACdhB,QAAAA,OAAO,CAACC,GAAR,CAAYe,KAAK,CAACnC,QAAlB;AACA6B,QAAAA,SAAS,CAAC,+BAAD,EAAkC,IAAlC,CAAT;AACD;AACF;AACF,GArDD;;AAuDA,QAAMA,SAAS,GAAG,CAACjC,OAAD,EAAUC,KAAV,EAAiBC,OAAO,GAAG,KAA3B,KAAqC;AACrDC,IAAAA,OAAO,CAAC;AACNJ,MAAAA,IAAI,EAAE,IADA;AAENC,MAAAA,OAFM;AAGNC,MAAAA,KAHM;AAINC,MAAAA;AAJM,KAAD,CAAP;AAMD,GAPD;;AASA,QAAM2B,SAAS,GAAG,MAAM;AACtBjB,IAAAA,SAAS,CAAC,EAAD,CAAT;AACA,QAAID,MAAM,GAAG,EAAb;;AAEA,QAAI,CAAC3B,SAAS,CAACwD,OAAV,CAAkBjC,KAAlB,CAAL,EAA+B;AAC7BI,MAAAA,MAAM,CAACJ,KAAP,GAAe,yBAAf;AACD;;AAED,QAAIvB,SAAS,CAACyD,OAAV,CAAkBhC,aAAlB,CAAJ,EAAsC;AACpCE,MAAAA,MAAM,CAACF,aAAP,GAAuB,mBAAvB;AACD;;AACD,QAAIzB,SAAS,CAACyD,OAAV,CAAkBvB,QAAlB,CAAJ,EAAiC;AAC/BP,MAAAA,MAAM,CAACO,QAAP,GAAkB,mBAAlB;AACD;;AACD,QAAIlC,SAAS,CAACyD,OAAV,CAAkBlC,KAAlB,CAAJ,EAA8B;AAC5BI,MAAAA,MAAM,CAACJ,KAAP,GAAe,mBAAf;AACD;;AAEDK,IAAAA,SAAS,CAACD,MAAD,CAAT;AAEA,WAAOA,MAAP;AACD,GArBD;;AAuBA,QAAM+B,gBAAgB,GAAIf,CAAD,IAAO;AAC9B,QAAIY,KAAK,GAAG,EAAZ;;AACA,YAAQZ,CAAC,CAACgB,MAAF,CAASC,IAAjB;AACE,WAAK,OAAL;AACE,YAAI,CAAC5D,SAAS,CAACwD,OAAV,CAAkBb,CAAC,CAACgB,MAAF,CAASE,KAA3B,CAAL,EAAwC;AACtCN,UAAAA,KAAK,GAAG,yBAAR;AACD;;AACD;;AAEF;AACE;AARJ;;AAWA,QAAIvD,SAAS,CAACyD,OAAV,CAAkBd,CAAC,CAACgB,MAAF,CAASE,KAA3B,CAAJ,EAAuC;AACrCN,MAAAA,KAAK,GAAG,mBAAR;AACD;;AAED3B,IAAAA,SAAS,CAAC,EAAE,GAAGD,MAAL;AAAa,OAACgB,CAAC,CAACgB,MAAF,CAASC,IAAV,GAAiBL;AAA9B,KAAD,CAAT;AACD,GAlBD;;AAoBA,sBACE;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA,4BACE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA,6BACE;AAAM,QAAA,QAAQ,EAAEb,YAAhB;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAG,UAAA,SAAS,EAAC,qBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,eAKE;AAAK,UAAA,SAAS,EAAC,0BAAf;AAAA,iCACE,QAAC,SAAD;AACE,YAAA,SAAS,EAAC,iBADZ;AAEE,YAAA,KAAK,EAAC,sBAFR;AAGE,YAAA,IAAI,EAAC,eAHP;AAIE,YAAA,KAAK,EAAEjB,aAJT;AAKE,YAAA,QAAQ,EAAEY,YALZ;AAME,YAAA,OAAO,EAAEqB,gBANX;AAOE,YAAA,IAAI,EAAC,UAPP;AAQE,YAAA,KAAK,EAAE/B,MAAM,CAACF,aAAP,GAAuB,IAAvB,GAA8B,KARvC;AASE,YAAA,UAAU,EAAEE,MAAM,CAACF,aAAP,IAAwBE,MAAM,CAACF;AAT7C;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBALF,eAkBE;AAAK,UAAA,SAAS,EAAC,0BAAf;AAAA,iCACE,QAAC,uBAAD;AAAyB,YAAA,KAAK,EAAEtB,WAAhC;AAA6C,YAAA,MAAM,EAAC,IAApD;AAAA,mCACE,QAAC,kBAAD;AACE,cAAA,SAAS,EAAC,iBADZ;AAEE,cAAA,MAAM,EAAC,YAFT;AAGE,cAAA,KAAK,EAAC,qBAHR;AAIE,cAAA,KAAK,EAAE0B,IAJT;AAKE,cAAA,WAAW,EAAC,YALd;AAME,cAAA,QAAQ,EAAEI;AANZ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAlBF,eA8BE;AAAK,UAAA,SAAS,EAAC,0BAAf;AAAA,iCACE,QAAC,SAAD;AACE,YAAA,SAAS,EAAC,iBADZ;AAEE,YAAA,KAAK,EAAC,aAFR;AAGE,YAAA,IAAI,EAAC,QAHP;AAIE,YAAA,IAAI,EAAC,UAJP;AAKE,YAAA,KAAK,EAAEC,QALT;AAME,YAAA,QAAQ,EAAEG,YANZ;AAOE,YAAA,KAAK,EAAEV,MAAM,CAACO,QAAP,GAAkB,IAAlB,GAAyB,KAPlC;AAQE,YAAA,UAAU,EAAEP,MAAM,CAACO,QAAP,IAAmBP,MAAM,CAACO,QARxC;AASE,YAAA,OAAO,EAAEwB;AATX;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBA9BF,eA2CE;AAAK,UAAA,SAAS,EAAC,0BAAf;AAAA,iCACE,QAAC,SAAD;AACE,YAAA,SAAS,EAAC,iBADZ;AAEE,YAAA,KAAK,EAAC,uBAFR;AAGE,YAAA,IAAI,EAAC,OAHP;AAIE,YAAA,IAAI,EAAC,OAJP;AAKE,YAAA,KAAK,EAAEnC,KALT;AAME,YAAA,KAAK,EAAEI,MAAM,CAACJ,KAAP,GAAe,IAAf,GAAsB,KAN/B;AAOE,YAAA,UAAU,EAAEI,MAAM,CAACJ,KAAP,IAAgBI,MAAM,CAACJ,KAPrC;AAQE,YAAA,QAAQ,EAAEc,YARZ;AASE,YAAA,OAAO,EAAEqB;AATX;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBA3CF,eAyDE;AAAK,UAAA,SAAS,EAAC,wBAAf;AAAA,kCACE,QAAC,gBAAD;AACE,YAAA,KAAK,EAAC,KADR;AAEE,YAAA,OAAO,eACL,QAAC,QAAD;AACE,cAAA,KAAK,EAAEvB,eADT;AAEE,cAAA,IAAI,EAAC,iBAFP;AAGE,cAAA,QAAQ,EAAEE,YAHZ;AAIE,cAAA,KAAK,EAAC;AAJR;AAAA;AAAA;AAAA;AAAA,oBAHJ;AAUE,YAAA,KAAK,eACH;AAAM,cAAA,KAAK,EAAE;AAAEyB,gBAAAA,QAAQ,EAAE;AAAZ,eAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAXJ;AAeE,YAAA,cAAc,EAAC;AAfjB;AAAA;AAAA;AAAA;AAAA,kBADF,eAkBE,QAAC,gBAAD;AACE,YAAA,KAAK,EAAC,KADR;AAEE,YAAA,OAAO,eACL,QAAC,QAAD;AACE,cAAA,KAAK,EAAE1B,YADT;AAEE,cAAA,IAAI,EAAC,cAFP;AAGE,cAAA,QAAQ,EAAEC,YAHZ;AAIE,cAAA,KAAK,EAAC;AAJR;AAAA;AAAA;AAAA;AAAA,oBAHJ;AAUE,YAAA,KAAK,eACH;AAAM,cAAA,KAAK,EAAE;AAAEyB,gBAAAA,QAAQ,EAAE;AAAZ,eAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAXJ;AAeE,YAAA,cAAc,EAAC;AAfjB;AAAA;AAAA;AAAA;AAAA,kBAlBF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAzDF,eA6FE,QAAC,MAAD;AACE,UAAA,OAAO,EAAC,WADV;AAEE,UAAA,SAAS,EAAEhD,OAAO,CAACiD,OAFrB;AAGE,UAAA,KAAK,EAAE;AACLC,YAAAA,KAAK,EAAE,MADF;AAELC,YAAAA,OAAO,EAAE,OAFJ;AAGLC,YAAAA,OAAO,EAAE,QAHJ;AAILC,YAAAA,MAAM,EAAE,QAJH;AAKLC,YAAAA,QAAQ,EAAE;AALL,WAHT;AAUE,UAAA,IAAI,EAAC,QAVP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA7FF,eA2GE,QAAC,IAAD;AACE,UAAA,KAAK,EAAE;AAAEH,YAAAA,OAAO,EAAE,OAAX;AAAoBE,YAAAA,MAAM,EAAE;AAA5B,WADT;AAEE,UAAA,SAAS,EAAC,YAFZ;AAGE,UAAA,EAAE,EAAC,kBAHL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA3GF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,eAsHE;AAAK,MAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,YAtHF,eAuHE,QAAC,MAAD;AACE,MAAA,IAAI,EAAEpD,IADR;AAEE,MAAA,OAAO,EAAEC,OAFX;AAGE,MAAA,KAAK,EAAEC,KAHT;AAIE,MAAA,WAAW,EAAEqB;AAJf;AAAA;AAAA;AAAA;AAAA,YAvHF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAgID,CA3RM;;GAAM3B,Q;UACMF,W,EACDF,U,EACAH,S,EAuBZC,O;;;KA1BOM,Q","sourcesContent":["import React, { useState } from \"react\";\nimport {\n  TextField,\n  Button,\n  FormControlLabel,\n  Checkbox,\n} from \"@material-ui/core\";\nimport { Link } from \"react-router-dom\";\nimport validator from \"validator\";\nimport {\n  KeyboardDatePicker,\n  MuiPickersUtilsProvider,\n} from \"@material-ui/pickers\";\nimport MomentUtils from \"@date-io/moment\";\nimport \"moment/locale/es\";\nimport { useStyles } from \"../../../hooks/useStyle\";\nimport { useForm } from \"../../../hooks/useForm\";\nimport { Alerta } from \"../Alerta\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useDispatch } from \"react-redux\";\nimport { registrar } from \"../../../actions/registro\";\n\nexport const Registro = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const classes = useStyles();\n  const [{ open, message, emoji, success }, setOpen] = useState({\n    open: false,\n    message: \"\",\n    emoji: \"\",\n    success: false,\n  });\n  const [response, setResponse] = useState({\n    host: \"\",\n    email: \"\",\n    phone: \"\",\n    numeroCliente: \"\",\n    birthday: \"\",\n  });\n  const [errors, setErrors] = useState({});\n  const [date, setDate] = useState(Date.now());\n\n  const handleDateChange = (date) => {\n    setDate(date);\n  };\n  const [\n    { numeroCliente, email, telefono, avisoPrivacidad, terminosCond },\n    handleChange,\n  ] = useForm({\n    numeroCliente: \"\",\n    email: \"\",\n    telefono: \"\",\n    avisoPrivacidad: false,\n    terminosCond: false,\n  });\n\n  const handleClose = () => {\n    setOpen({\n      open: false,\n      message: \"\",\n      emoji: \"\",\n    });\n    if (success) {\n      console.log(response);\n\n      dispatch(registrar(response));\n      history.push(\"/auth/user/validacion\");\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    // console.log(date.format(\"YYYY-MM-DD\"));\n    e.preventDefault();\n    const errors = validForm();\n    if (Object.keys(errors).length === 0) {\n      if (!avisoPrivacidad) {\n        updAlerta(\n          \"Debes aceptar los avisos de privacidad para poder continuar.\",\n          \"⚠️\"\n        );\n        return;\n      }\n\n      if (!terminosCond) {\n        updAlerta(\n          \"Debes aceptar los términos y condiciones para continuar.\",\n          \"⚠️\"\n        );\n        return;\n      }\n\n      try {\n        const { data } = await axios.post(\n          \"https://kikoya-portal.herokuapp.com/api/v1/enrollment/registry/\",\n          {\n            host: \"sandbox001369cd406f49aa875bd8f230a0de80.mailgun.org\",\n            client_number: numeroCliente,\n            email: email,\n            phone: telefono,\n            birthday: date.format(\"YYYY-MM-DD\"),\n          }\n        );\n\n        const { user } = data;\n\n        setResponse({\n          host: user.host,\n          email: user.email,\n          phone: user.phone,\n          birthday: date.format(\"YYYY-MM-DD\"),\n          numeroCliente,\n        });\n\n        updAlerta(\n          \"Se ha enviado un NIP a tu correo electrónico y celular.\",\n          \"🔢\",\n          true\n        );\n      } catch (error) {\n        console.log(error.response);\n        updAlerta(\"Algo salio mal en el servidor\", \"⚠️\");\n      }\n    }\n  };\n\n  const updAlerta = (message, emoji, success = false) => {\n    setOpen({\n      open: true,\n      message,\n      emoji,\n      success,\n    });\n  };\n\n  const validForm = () => {\n    setErrors({});\n    let errors = {};\n\n    if (!validator.isEmail(email)) {\n      errors.email = \"Ingrese un email valido\";\n    }\n\n    if (validator.isEmpty(numeroCliente)) {\n      errors.numeroCliente = \"Campo obligatorio\";\n    }\n    if (validator.isEmpty(telefono)) {\n      errors.telefono = \"Campo obligatorio\";\n    }\n    if (validator.isEmpty(email)) {\n      errors.email = \"Campo obligatorio\";\n    }\n\n    setErrors(errors);\n\n    return errors;\n  };\n\n  const handleInputPress = (e) => {\n    let error = \"\";\n    switch (e.target.name) {\n      case \"email\":\n        if (!validator.isEmail(e.target.value)) {\n          error = \"Ingrese un email valido\";\n        }\n        break;\n\n      default:\n        break;\n    }\n\n    if (validator.isEmpty(e.target.value)) {\n      error = \"Campo obligatorio\";\n    }\n\n    setErrors({ ...errors, [e.target.name]: error });\n  };\n\n  return (\n    <div className=\"registro__container\">\n      <div className=\"registro__form\">\n        <form onSubmit={handleSubmit}>\n          <h1 className=\"titulo\">Registrate para ser parte de KIKOYA</h1>\n          <p className=\"informacion_parrafo\">\n            Ten a la mano la información de tu cuenta para poder acceder.\n          </p>\n          <div className=\"registro__containerInput\">\n            <TextField\n              className=\"registro__input\"\n              label=\"Número de cliente\"\n              name=\"numeroCliente\"\n              value={numeroCliente}\n              onChange={handleChange}\n              onKeyUp={handleInputPress}\n              type=\"password\"\n              error={errors.numeroCliente ? true : false}\n              helperText={errors.numeroCliente && errors.numeroCliente}\n            />\n          </div>\n          <div className=\"registro__containerInput\">\n            <MuiPickersUtilsProvider utils={MomentUtils} locale=\"es\">\n              <KeyboardDatePicker\n                className=\"registro__input\"\n                format=\"DD/MM/yyyy\"\n                label=\"Fecha de nacimiento\"\n                value={date}\n                placeholder=\"dd/mm/aaaa\"\n                onChange={handleDateChange}\n              />\n            </MuiPickersUtilsProvider>\n          </div>\n          <div className=\"registro__containerInput\">\n            <TextField\n              className=\"registro__input\"\n              label=\"Teléfono\"\n              type=\"number\"\n              name=\"telefono\"\n              value={telefono}\n              onChange={handleChange}\n              error={errors.telefono ? true : false}\n              helperText={errors.telefono && errors.telefono}\n              onKeyUp={handleInputPress}\n            />\n          </div>\n          <div className=\"registro__containerInput\">\n            <TextField\n              className=\"registro__input\"\n              label=\"Correo electrónico\"\n              name=\"email\"\n              type=\"email\"\n              value={email}\n              error={errors.email ? true : false}\n              helperText={errors.email && errors.email}\n              onChange={handleChange}\n              onKeyUp={handleInputPress}\n            />\n          </div>\n\n          <div className=\"containerRecoveryLogin\">\n            <FormControlLabel\n              value=\"end\"\n              control={\n                <Checkbox\n                  value={avisoPrivacidad}\n                  name=\"avisoPrivacidad\"\n                  onChange={handleChange}\n                  color=\"primary\"\n                />\n              }\n              label={\n                <span style={{ fontSize: \"14px\" }}>\n                  Estoy de acuerdo con el Aviso de privacidad\n                </span>\n              }\n              labelPlacement=\"end\"\n            />\n            <FormControlLabel\n              value=\"end\"\n              control={\n                <Checkbox\n                  value={terminosCond}\n                  name=\"terminosCond\"\n                  onChange={handleChange}\n                  color=\"primary\"\n                />\n              }\n              label={\n                <span style={{ fontSize: \"14px\" }}>\n                  Acepto los Términos y condiciones\n                </span>\n              }\n              labelPlacement=\"end\"\n            />\n          </div>\n          <Button\n            variant=\"contained\"\n            className={classes.primary}\n            style={{\n              width: \"100%\",\n              display: \"block\",\n              padding: \"15px 0\",\n              margin: \"15px 0\",\n              maxWidth: \"400px\",\n            }}\n            type=\"submit\"\n          >\n            REGÍSTRATE\n          </Button>\n          <Link\n            style={{ display: \"block\", margin: \"8px 0\" }}\n            className=\"forgotPass\"\n            to=\"/auth/user/login\"\n          >\n            ¿Ya tienes una cuenta? Inicia sesión\n          </Link>\n        </form>\n      </div>\n      <div className=\"capaLogo\"></div>\n      <Alerta\n        open={open}\n        message={message}\n        emoji={emoji}\n        handleClose={handleClose}\n      />\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}